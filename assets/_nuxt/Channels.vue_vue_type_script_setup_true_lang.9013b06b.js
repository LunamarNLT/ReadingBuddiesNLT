import q from"./InputText.2ab10032.js";import{a as z,v as w,y as D,a0 as N,f as U,b as B,o as m,h as u,i as t,m as y,u as s,j as l,w as n,s as H,G as I,a1 as F,r as h,L as O,t as c}from"./entry.61f443fa.js";import K from"./AddChannel.d6ea4339.js";const $={class:"grid-nogutter grid col-12 p-3"},E=t("div",{class:"flex justify-content-start align-items-center border-bottom-2 border-light-grey pb-2"},[t("span",{class:"material-icons-outlined text-grey text-4xl"},"subject"),t("span",{class:"text-grey font-bold text-2xl font-bold ml-2"},"Channels")],-1),G=[E],J={class:"col-12 md:12"},M={class:"flex align-items-end mb-2 mt-2 justify-content-between border-bottom-1 border-light-grey pt-2 pb-3"},W={class:"flex"},X={class:"flex align-items-end mb-1 field-checkbox ml-2"},Y={class:"flex align-items-end mb-1 field-checkbox ml-2"},Z={class:"flex align-items-end mb-1 field-checkbox ml-2"},ee={class:"flex align-items-end"},te={class:"col-12 md:12"},le={key:0,class:"min-h-0 mt-3"},se=t("div",{class:"flex justify-content-center align-items-center bg-white",style:{"min-height":"42vh"}},[t("span",{class:"font-italic font-medium text-grey"},"No Channels Found")],-1),ne={class:"flex ml-2"},oe={key:0,class:"material-symbols-outlined text-cqrs text-lg"},ae={key:1,class:"material-symbols-outlined text-grey text-center text-lg"},ie=t("div",{class:"px-3 pt-0 pb-3 text-center font-bold"},"Customized Buttons",-1),de={class:"white-space-nowrap overflow-hidden text-overflow-ellipsis"},re={key:1,class:"min-h-0 mt-3"},ce={class:"flex justify-content-center align-items-center bg-white",style:{"min-height":"42vh"}},me={key:0,class:"font-italic font-medium text-grey"},ye=z({__name:"Channels",props:{modelValue:{type:Object,default:()=>[]}},setup(k){const V=k,x=w(),d=D("cqrs-channels-filters",{onlyActive:!1,showCommands:!0,showQueries:!0}),p=w(""),b=N(),S=U(),{isStreamReady:a,setCQRSSelectedChannel:A}=B(),P=i=>{A(i.data.name,i.data.type),I(()=>{const o=b.fullPath==="/cqrs/"?b.fullPath+"channel":b.fullPath+"/channel";F(o)})},C=i=>p.value.length>0?i.name.toLowerCase().includes(p.value.toLowerCase()):!0,g=()=>V.modelValue.filter(i=>d.value.onlyActive&&!i.isActive?!1:d.value.showCommands&&i.type==="commands"||d.value.showQueries&&i.type==="queries"?C(i):!1),T=()=>{S.open(K,{props:{header:"Add a Commands & Queries Channel",style:{width:"30vw"},breakpoints:{"960px":"75vw","640px":"90vw"},modal:!0},data:{channelType:3}})};return(i,o)=>{const L=q,_=h("Checkbox"),f=h("Button"),r=h("Column"),Q=h("Tag"),R=h("InputText"),j=h("DataTable");return m(),u("div",$,[t("div",{class:y(["col-12 md:12",s(a)?"":"div-disabled"])},G,2),t("div",J,[t("div",M,[t("div",W,[l(L,{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e),disabled:!s(a),placeholder:"Search by channel name",styleProp:"min-width: 20rem",iconClass:"pi pi-search"},null,8,["modelValue","disabled"]),t("div",X,[l(_,{inputId:"binary",modelValue:s(d).showCommands,"onUpdate:modelValue":o[1]||(o[1]=e=>s(d).showCommands=e),binary:!0,class:"ml-2",disabled:!s(a)},null,8,["modelValue","disabled"]),t("label",{class:y(s(a)?"text-grey":"text-light-grey"),for:"binary"},"Commands",2)]),t("div",Y,[l(_,{inputId:"binary",modelValue:s(d).showQueries,"onUpdate:modelValue":o[2]||(o[2]=e=>s(d).showQueries=e),binary:!0,class:"ml-2",disabled:!s(a)},null,8,["modelValue","disabled"]),t("label",{class:y(s(a)?"text-grey":"text-light-grey"),for:"binary"},"Queries",2)]),t("div",Z,[l(_,{inputId:"binary",modelValue:s(d).onlyActive,"onUpdate:modelValue":o[3]||(o[3]=e=>s(d).onlyActive=e),binary:!0,class:"ml-2",disabled:!s(a)},null,8,["modelValue","disabled"]),t("label",{class:y(s(a)?"text-grey":"text-light-grey"),for:"binary"},"Only Active",2)])]),t("div",ee,[t("div",null,[l(f,{label:"Add Channel",class:"button-cqrs bg-white",icon:"pi pi-plus",onClick:T,disabled:!s(a),style:{"min-width":"12rem"}},null,8,["disabled"])])])])]),t("div",te,[s(a)&&g().length>0?(m(),u("div",le,[l(j,{value:g(),paginator:g().length>25,rows:25,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[25,50,100],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Channels",responsiveLayout:"scroll",class:"p-datatable-sm",selection:x.value,"onUpdate:selection":o[4]||(o[4]=e=>x.value=e),selectionMode:"single",dataKey:"channelKey",onRowSelect:P},{empty:n(()=>[se]),default:n(()=>[l(r,{header:"#",headerStyle:"width: 1rem"},{body:n(({index:e})=>[O(c(e+1),1)]),_:1}),l(r,{field:"isActive",header:"Active",headerStyle:"width: 1rem"},{body:n(({data:e})=>[t("div",ne,[e.isActive?(m(),u("span",oe,"radio_button_checked")):(m(),u("span",ae,"radio_button_unchecked"))])]),_:1}),l(r,{field:"type",header:"Type",headerStyle:"width: 8rem"},{body:n(({data:e})=>[t("div",null,[l(Q,{class:"font-light pt-0 pb-0 pl-2 pr-2 bg-white border-1 text-cqrs border-cqrs",value:e.type==="commands"?"Commands":"Queries",rounded:!0},null,8,["value"])])]),filter:n(({filterModel:e})=>[l(R,{type:"text",modelValue:e.value,"onUpdate:modelValue":v=>e.value=v,class:"p-column-filter",placeholder:"Search by country"},null,8,["modelValue","onUpdate:modelValue"])]),filterclear:n(({filterCallback:e})=>[l(f,{type:"button",icon:"pi pi-times",onClick:v=>e(),class:"p-button-secondary"},null,8,["onClick"])]),filterapply:n(({filterCallback:e})=>[l(f,{type:"button",icon:"pi pi-check",onClick:v=>e(),class:"p-button-success"},null,8,["onClick"])]),filterfooter:n(()=>[ie]),_:1}),l(r,{field:"channel",header:"Channel",headerStyle:"width: 30rem"},{body:n(({data:e})=>[t("div",de,c(e.name),1)]),_:1}),l(r,{field:"lastActivity",header:"Last Activity",sortable:"",headerStyle:"width:10rem"},{body:n(({data:e})=>[t("div",null,c(e.lastActivityHuman),1)]),_:1}),l(r,{field:"incoming.messages",header:"Sent",sortable:"",headerStyle:"width:11rem"},{body:n(({data:e})=>[t("div",null,c(e.incoming.messagesHumanized)+"/"+c(e.incoming.volumeHumanized),1)]),_:1}),l(r,{field:"outgoing.messages",header:"Delivered",sortable:"",headerStyle:"width:11rem"},{body:n(({data:e})=>[t("div",null,c(e.outgoing.messagesHumanized)+"/"+c(e.outgoing.volumeHumanized),1)]),_:1}),l(r,{field:"total.clients",header:"Clients",sortable:"",headerStyle:"width:5rem"},{body:n(({data:e})=>[t("div",null,c(e.total.clientsHumanized),1)]),_:1})]),_:1},8,["value","paginator","selection"])])):(m(),u("div",re,[t("div",ce,[s(a)?(m(),u("span",me,"No Channels found, try adding a Channel")):H("",!0)])]))])])}}});export{ye as _};
