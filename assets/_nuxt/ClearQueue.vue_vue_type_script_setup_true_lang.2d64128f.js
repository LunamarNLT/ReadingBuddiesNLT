import{u as v}from"./request.226e26ee.js";import{u as g}from"./useToastMessage.5053bbd0.js";import{P as h}from"./queues_request.d6d8f046.js";import{b as _}from"./stream.38699bf4.js";import{a as C,v as b,s as y,f as w,h as t,i as r,P as x,r as B,o as k}from"./entry.53b34a98.js";const q={class:"grid-nogutter grid col-12 mt-2"},Q=t("div",{class:"col-12 md:col-12 pt-0 mb-2 flex align-items-end"},[t("i",{class:"pi pi-info-circle text-error mr-2 text-2xl"}),t("span",{class:"font-medium text-lg"},"Are you sure you want to clear the queue?")],-1),R={class:"flex align-items-end grid justify-content-end p-fluid col-12 pb-0 mb-1 mt-2"},E={class:"mr-2"},S={class:"ml-2"},V=C({__name:"ClearQueue",setup($){const u=_("system-connection"),d=e=>{e==="disconnected"&&i()};u.on(d);const s=x("dialogRef");b(()=>{s.value.options.props.header="Clear all messages in Queue: "+s.value.data.channel});let n=null;const m=v(),l=g(),o=y(!1),p=()=>{o.value=!0,n=new h(s.value.data.channel),m.sendRequest(n).then(e=>{l.showSuccess(`Queue Channel ${s.value.data.channel.value} messages deleted successfully`,`${e.data.count} messages were deleted`)}).catch(e=>{e.isCanceled?l.showWarn("Request Canceled"):l.showError("Error clearing a Queue channel",e.message)}).finally(()=>{o.value=!1,s.value.close()})},i=()=>{n!==null&&n.abort(),s.value.close()};return(e,a)=>{const c=B("Button");return k(),w("div",q,[Q,t("div",R,[t("div",E,[r(c,{label:o.value?"Cancel":"No",class:"button-grey",icon:"pi pi-times",onClick:a[0]||(a[0]=f=>i()),style:{width:"10rem"}},null,8,["label"])]),t("div",S,[r(c,{label:"Yes",onClick:a[1]||(a[1]=f=>p()),class:"button-grey",loading:o.value,icon:"pi pi-check",style:{width:"10rem"}},null,8,["loading"])])])])}}});export{V as _};
