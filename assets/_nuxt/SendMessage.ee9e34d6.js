import Y from"./InputText.2ab10032.js";import j from"./InputNumber.05cf9b73.js";import z from"./CodeEditor.341c139e.js";import{_ as H}from"./Field.vue_vue_type_script_setup_true_lang.5dd75765.js";import{_ as G}from"./DataField.vue_vue_type_script_setup_true_lang.1c06eec1.js";import{u as L}from"./request.b3446890.js";import{u as P}from"./useToastMessage.af91aa57.js";import{a as J,y as I,v as y,z as K,x as O,o as m,h as c,i as e,m as W,j as l,u as o,A as M,s as p,w,B as X,C as Z,F as ee,D as se,E as oe,r as S,p as le,k as te,G as ae,l as ne}from"./entry.61f443fa.js";import{u as de,r as V}from"./index.esm.bd0dd375.js";import{S as ie}from"./cqrs_request.3130640f.js";class ue{constructor(){this.requestId="",this.channel="",this.clientId="",this.metadata="",this.body="",this.tags="",this.isCommands=!1,this.timeout=0}}class me{constructor(){this.metadata="",this.body="",this.tags="",this.timestamp=0,this.executed=!1,this.error=""}}const B=r=>(le("data-v-46dd3693"),r=r(),te(),r),ce={key:0},re={key:0,class:"flex align-items-end grid p-fluid col-12 pb-0 mb-2"},pe={class:"col-12 md:col-3 pt-0"},ve={class:"col-12 md:col-3 pt-0"},_e={class:"flex"},he={class:"mr-2"},fe=B(()=>e("label",{class:"ml-1",for:"commands"},"Commands",-1)),ge={class:"ml-2"},be=B(()=>e("label",{class:"ml-1",for:"queries"},"Queries",-1)),ye={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-2"},Se={class:"col-12 md:col-2 pt-0"},Ce={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},Ve={class:"col-12 md:col-12 pt-0"},qe={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1 mt-2"},xe={class:"col-12 md:col-12 pt-0"},Re={class:"flex align-items-end grid p-fluid border-top-1 border-light-grey col-12 pb-0 mb-1"},ke={class:"col-12 md:col-4 pt-0"},Ie={class:"col-12 md:col-4 pt-0"},Me={class:"col-12 md:col-4 pt-0"},we={class:"grid-nogutter grid col-12 mt-2"},Be={class:"flex align-items-end grid justify-content-end p-fluid col-12 pb-0 mb-1 mt-2"},Te={class:"mr-2"},Fe={class:"ml-2"},Ae={key:1,class:"grid formgrid p-fluid col-12 md:12 pt-3"},Ue={class:"col-12 md:col-3 p-1"},De={class:"col-12 md:col-3 p-1"},Ee={class:"col-12 md:col-6 p-1"},Qe={key:0,class:"col-12 md:col-6 p-1"},$e={key:1,class:"col-12 md:col-6 p-1"},Ne={key:2,class:"col-12 md:col-12 p-1"},Ye=J({__name:"SendMessage",setup(r){const n=I("send-cqrs-required-Data",{channel:"",body:"",timeout:60}),i=I("send-cqrs-radio-button","commands"),d=se("dialogRef"),C=y(!1);let a=K(new ue);const u=y(new me);O(()=>{C.value=d.value.data.isChannelSource,g.value=!1,d.value.options.props.header="Send a Commands & Queries Message",C.value&&(n.value.channel=d.value.data.channel,i.value=d.value.data.isCommands?"commands":"queries",d.value.data.isCommands?d.value.options.props.header="Send a Command message to: "+n.value.channel:d.value.options.props.header="Send a Query message to: "+n.value.channel)});const T=L();let f;const q=P(),v=y(!1),g=y(!1),x=de({body:{required:V},channel:{required:V},timeout:{required:V}},n.value),F=_=>{_&&(v.value=!0,ae(()=>{v.value=!0}),a.isCommands=i.value==="commands",a.channel=n.value.channel,a.body=n.value.body,a.timeout=n.value.timeout,f=new ie(a),T.sendRequest(f).then(s=>{q.showSuccess("Message Sent Successfully"),g.value=!0,d.value.options.props.header="Commands & Queries Message Response",u.value=s.data}).catch(s=>{q.showError("Error sending commands & queries message",s)}).finally(()=>{v.value=!1}))},A=()=>{f&&f.abort(),d.value.close()},U=_=>_===0?"N/A":oe(_).format("YYYY-MM-DD HH:mm:ss");return(_,s)=>{const b=Y,R=S("RadioButton"),D=j,E=z,Q=S("AccordionTab"),$=S("Accordion"),k=S("Button"),h=H,N=G;return m(),c(ee,null,[g.value?p("",!0):(m(),c("div",ce,[e("form",{onSubmit:s[9]||(s[9]=X(t=>F(!o(x).$invalid),["prevent"]))},[e("div",{class:W(["grid-nogutter grid col-12 mt-2",v.value?"div-disabled":""])},[C.value?p("",!0):(m(),c("div",re,[e("div",pe,[l(b,{label:"Channel*",modelValue:o(n).channel,"onUpdate:modelValue":s[0]||(s[0]=t=>o(n).channel=t),placeholder:"channel name"},null,8,["modelValue"])]),e("div",ve,[e("div",_e,[e("div",he,[l(R,{inputId:"commands",name:"cqrs",value:"commands",modelValue:o(i),"onUpdate:modelValue":s[1]||(s[1]=t=>M(i)?i.value=t:null)},null,8,["modelValue"]),fe]),e("div",ge,[l(R,{inputId:"queries",name:"cqrs",value:"queries",modelValue:o(i),"onUpdate:modelValue":s[2]||(s[2]=t=>M(i)?i.value=t:null)},null,8,["modelValue"]),be])])])])),e("div",ye,[e("div",Se,[l(D,{label:"Timeout in Seconds",modelValue:o(n).timeout,"onUpdate:modelValue":s[3]||(s[3]=t=>o(n).timeout=t),min:1,max:82320},null,8,["modelValue"])])]),e("div",Ce,[e("div",Ve,[l(E,{label:"Body*",modelValue:o(n).body,"onUpdate:modelValue":s[4]||(s[4]=t=>o(n).body=t),height:"300px"},null,8,["modelValue"])])]),e("div",qe,[e("div",xe,[l($,null,{default:w(()=>[l(Q,{header:"Message Attributes"},{default:w(()=>[e("div",Re,[e("div",ke,[l(b,{label:"Request Id",modelValue:o(a).requestId,"onUpdate:modelValue":s[5]||(s[5]=t=>o(a).requestId=t),placeholder:"Request Id"},null,8,["modelValue"])]),e("div",Ie,[l(b,{label:"Metadata",modelValue:o(a).metadata,"onUpdate:modelValue":s[6]||(s[6]=t=>o(a).metadata=t),placeholder:"metadata string..."},null,8,["modelValue"])]),e("div",Me,[l(b,{label:"Tags",modelValue:o(a).tags,"onUpdate:modelValue":s[7]||(s[7]=t=>o(a).tags=t),placeholder:"key=value,key2=value2"},null,8,["modelValue"])])])]),_:1})]),_:1})])])],2),e("div",we,[e("div",Be,[e("div",Te,[l(k,{label:"Cancel",class:"button-grey",icon:"pi pi-times",onClick:s[8]||(s[8]=t=>A()),style:{width:"10rem"}})]),e("div",Fe,[l(k,{label:"Send",type:"submit",disabled:o(x).$invalid,class:"button-grey",loading:v.value,icon:"pi pi-send",style:{width:"10rem"}},null,8,["disabled","loading"])])])])],32)])),g.value?(m(),c("div",Ae,[e("div",{class:"grid formgrid p-fluid col-12 md:12",style:Z(o(a).isCommands?"height: 15vh":"")},[e("div",Ue,[l(h,{label:"Executed",value:u.value.executed},null,8,["value"])]),e("div",De,[l(h,{label:"Timestamp",value:U(u.value.timestamp)},null,8,["value"])]),e("div",Ee,[l(h,{label:"Error",value:u.value.error},null,8,["value"])])],4),o(a).isCommands?p("",!0):(m(),c("div",Qe,[l(h,{label:"Metadata",value:u.value.metadata},null,8,["value"])])),o(a).isCommands?p("",!0):(m(),c("div",$e,[l(h,{label:"Tags",value:u.value.tags},null,8,["value"])])),o(a).isCommands?p("",!0):(m(),c("div",Ne,[l(N,{label:"Body",value:u.value.body,styleProp:"height: 32vh"},null,8,["value"])]))])):p("",!0)],64)}}}),Ze=ne(Ye,[["__scopeId","data-v-46dd3693"]]);export{Ze as default};
