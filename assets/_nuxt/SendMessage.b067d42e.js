var U=Object.defineProperty;var k=(u,e,c)=>e in u?U(u,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):u[e]=c;var d=(u,e,c)=>(k(u,typeof e!="symbol"?e+"":e,c),c);import B from"./InputText.dcc834c4.js";import E from"./CodeEditor.1d468d1c.js";import D from"./InputNumber.1a89dc76.js";import{u as N}from"./request.96b78a51.js";import{u as $}from"./useToastMessage.d880f1b4.js";import{a as F,s as M,M as L,v as j,f as S,h as l,i as n,u as s,q as P,w as C,N as W,P as z,r as x,o as R,E as G,k as H}from"./entry.e4fef673.js";import{u as J,r as I}from"./index.esm.537293c8.js";import{S as K}from"./queues_request.c7d986ae.js";import{b as O,a as X}from"./stream.7512440b.js";import"./StatStripCard.vue_vue_type_style_index_0_scoped_b87ef05f_lang.90af4798.js";class Y{constructor(e){d(this,"messageId");d(this,"channel");d(this,"clientId");d(this,"metadata");d(this,"body");d(this,"tags");d(this,"maxReceiveCount");d(this,"maxReceiveQueue");d(this,"expirationAt");d(this,"delayedTo");this.messageId="",this.channel="",this.clientId="",this.metadata="",this.body="",this.tags="",this.maxReceiveCount=0,this.maxReceiveQueue="",this.expirationAt=0,this.delayedTo=0}setMessageId(e){return this.messageId=e,this}setChannel(e){return this.channel=e,this}setClientId(e){return this.clientId=e,this}setMetadata(e){return this.metadata=e,this}setBody(e){return this.body=e,this}setTags(e){return this.tags=e,this}setMaxReceiveCount(e){return this.maxReceiveCount=e,this}setMaxReceiveQueue(e){return this.maxReceiveQueue=e,this}setExpirationAt(e){return this.expirationAt=e,this}setDelayedTo(e){return this.delayedTo=e,this}}const Z={class:"grid-nogutter grid col-12 mt-2"},ee={key:0,class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},te={class:"col-12 md:col-3 pt-0"},se={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},oe={class:"col-12 md:col-12 pt-0"},le={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1 mt-2"},ae={class:"col-12 md:col-12 pt-0"},ne={class:"flex align-items-end grid p-fluid border-top-1 border-light-grey col-12 pb-0 mb-1"},de={class:"col-12 md:col-3 pt-0"},ie={class:"col-12 md:col-3 pt-0"},ue={class:"col-12 md:col-3 pt-0"},ce={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},re={class:"col-12 md:col-3 pt-0"},me={class:"col-12 md:col-3 pt-0"},pe={class:"col-12 md:col-3 pt-0"},he={class:"col-12 md:col-3 pt-0"},ve={class:"flex align-items-end grid justify-content-end p-fluid col-12 pb-0 mb-1 mt-2"},ge={class:"mr-2"},_e={class:"ml-2"},be=F({__name:"SendMessage",setup(u){const e=O("system-connection"),c=v=>{v==="disconnected"&&b()};e.on(c);const i=X("send-queues-required-Data",{channel:"",body:""}),r=z("dialogRef"),g=M(!1);let a=L(new Y(r.value.data.channel));j(()=>{g.value=r.value.data.isChannelSource,r.value.options.props.header="Send a Queue Message",g.value&&(i.value.channel=r.value.data.channel,r.value.options.props.header="Send a Queue message to: "+i.value.channel)});let p=null;const Q=N(),_=$(),h=M(!1),y=J({body:{required:I},channel:{required:I}},i.value),T=v=>{v&&(h.value=!0,G(()=>{h.value=!0}),a.channel=i.value.channel,a.body=i.value.body,p=new K(a),Q.sendRequest(p).then(t=>{_.showSuccess("Message Sent Successfully")}).catch(t=>{t.isCanceled?_.showWarn("Request Canceled"):_.showError("Error sending Queue message",t.message)}).finally(()=>{h.value=!1,b()}))},b=()=>{p!==null&&p.abort(),r.value.close()};return(v,t)=>{const m=B,A=E,f=D,w=x("AccordionTab"),q=x("Accordion"),V=x("Button");return R(),S("form",{onSubmit:t[10]||(t[10]=W(o=>T(!s(y).$invalid),["prevent"]))},[l("div",Z,[g.value?P("",!0):(R(),S("div",ee,[l("div",te,[n(m,{label:"Channel*",modelValue:s(i).channel,"onUpdate:modelValue":t[0]||(t[0]=o=>s(i).channel=o),placeholder:"Channel name"},null,8,["modelValue"])])])),l("div",se,[l("div",oe,[n(A,{label:"Body*",modelValue:s(i).body,"onUpdate:modelValue":t[1]||(t[1]=o=>s(i).body=o),height:"300px"},null,8,["modelValue"])])]),l("div",le,[l("div",ae,[n(q,null,{default:C(()=>[n(w,{header:"Message Attributes"},{default:C(()=>[l("div",ne,[l("div",de,[n(m,{label:"Message Id",modelValue:s(a).messageId,"onUpdate:modelValue":t[2]||(t[2]=o=>s(a).messageId=o),placeholder:"Message Id"},null,8,["modelValue"])]),l("div",ie,[n(m,{label:"Metadata",modelValue:s(a).metadata,"onUpdate:modelValue":t[3]||(t[3]=o=>s(a).metadata=o),placeholder:"metadata string..."},null,8,["modelValue"])]),l("div",ue,[n(m,{label:"Tags",modelValue:s(a).tags,"onUpdate:modelValue":t[4]||(t[4]=o=>s(a).tags=o),placeholder:"key=value,key2=value2"},null,8,["modelValue"])])]),l("div",ce,[l("div",re,[n(f,{label:"Message Expiration Seconds ",modelValue:s(a).expirationAt,"onUpdate:modelValue":t[5]||(t[5]=o=>s(a).expirationAt=o),min:0,max:82320},null,8,["modelValue"])]),l("div",me,[n(f,{label:"Message Delay Seconds",modelValue:s(a).delayedTo,"onUpdate:modelValue":t[6]||(t[6]=o=>s(a).delayedTo=o),min:0,max:82320},null,8,["modelValue"])]),l("div",pe,[n(f,{label:"Max Retries",modelValue:s(a).maxReceiveCount,"onUpdate:modelValue":t[7]||(t[7]=o=>s(a).maxReceiveCount=o),min:0,max:1024},null,8,["modelValue"])]),l("div",he,[n(m,{label:"Dead-Letter Queue",modelValue:s(a).maxReceiveQueue,"onUpdate:modelValue":t[8]||(t[8]=o=>s(a).maxReceiveQueue=o),placeholder:"No Dead-Letter Queue"},null,8,["modelValue"])])])]),_:1})]),_:1})])]),l("div",ve,[l("div",ge,[n(V,{label:"Cancel",class:"button-grey",icon:"pi pi-times",onClick:t[9]||(t[9]=o=>b()),style:{width:"10rem"}})]),l("div",_e,[n(V,{label:"Send",type:"submit",disabled:s(y).$invalid,class:"button-grey",loading:h.value,icon:"pi pi-send",style:{width:"10rem"}},null,8,["disabled","loading"])])])])],32)}}}),we=H(be,[["__scopeId","data-v-adcbd94e"]]);export{we as default};
