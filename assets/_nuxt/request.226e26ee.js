var o=Object.defineProperty;var i=(s,e,a)=>e in s?o(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a;var n=(s,e,a)=>(i(s,typeof e!="symbol"?e+"":e,a),a);import{a as c}from"./StatStripCard.vue_vue_type_style_index_0_scoped_b87ef05f_lang.52c9345e.js";import{c as u}from"./stream.38699bf4.js";function h(){const{ApiOrigin:s}=u();return{sendRequest:a=>new Promise((l,r)=>{c.post("/api/request",a.payload,{baseURL:s.value,signal:a.signal}).then(t=>{t.data.error&&r({isCanceled:!1,message:t.data.error_string}),l(t.data)}).catch(t=>{t.message==="canceled"?r({isCanceled:!0,message:"Request canceled by user"}):r({isCanceled:!1,message:t.message})})})}}class b{constructor(e,a){n(this,"abortController");n(this,"signal");n(this,"payload");this.payload={type:e,data:a},this.abortController=new AbortController,this.signal=this.abortController.signal}cancelFn(){return{}}completed(){this.cancelFn()}abort(){this.abortController.abort(),this.cancelFn()}setCancelFn(e){this.cancelFn=e}}export{b as G,h as u};
