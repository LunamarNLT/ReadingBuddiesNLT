import A from"./InputText.2ab10032.js";import U from"./CodeEditor.341c139e.js";import{G as P,u as T}from"./request.b3446890.js";import{u as $}from"./useToastMessage.af91aa57.js";import{a as j,y as S,v as V,z as D,x as G,o as y,h as x,i as s,j as a,u as t,A as M,s as N,w as I,B as F,D as z,r as m,p as L,k as H,G as J,l as K}from"./entry.61f443fa.js";import{u as O,r as E}from"./index.esm.bd0dd375.js";class Q{constructor(){this.messageId="",this.channel="",this.clientId="",this.metadata="",this.body="",this.tags="",this.isEvents=!1}}class W extends P{constructor(l){super("send_pubsub_message",l)}}const w=c=>(L("data-v-40d93825"),c=c(),H(),c),X={class:"grid-nogutter grid col-12 mt-2"},Y={key:0,class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},Z={class:"col-12 md:col-3 pt-0"},ee={class:"col-12 md:col-3 pt-0"},se={class:"flex"},oe={class:"mr-2"},te=w(()=>s("label",{class:"ml-1",for:"events"},"Events",-1)),le={class:"ml-2"},ae=w(()=>s("label",{class:"ml-1",for:"events_store"},"Events Store",-1)),ne={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},de={class:"col-12 md:col-12 pt-0"},ie={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1 mt-2"},ue={class:"col-12 md:col-12 pt-0"},ce={class:"flex align-items-end grid p-fluid border-top-1 border-light-grey col-12 pb-0 mb-1"},re={class:"col-12 md:col-4 pt-0"},me={class:"col-12 md:col-4 pt-0"},pe={class:"col-12 md:col-4 pt-0"},ve={class:"flex align-items-end grid justify-content-end p-fluid col-12 pb-0 mb-1 mt-2"},_e={class:"mr-2"},be={class:"ml-2"},he=j({__name:"SendMessage",setup(c){const l=S("send-pub-sub-required-Data",{channel:"",body:""}),d=S("send-pub-sub-radio-button","events"),p=V(!1),i=z("dialogRef");let n=D(new Q);G(()=>{p.value=i.value.data.isChannelSource,i.value.options.props.header="Send a PubSub Message",p.value&&(l.value.channel=i.value.data.channel,d.value=i.value.data.isEvents?"events":"events_store",i.value.data.isEvents?i.value.options.props.header="Publish Events message to: "+l.value.channel:i.value.options.props.header="Publish Events-Store message to: "+l.value.channel)});const C=T(),v=$(),r=V(!1),_=O({body:{required:E},channel:{required:E}},l.value),B=h=>{if(h){r.value=!0,J(()=>{r.value=!0}),n.isEvents=d.value==="events",n.channel=l.value.channel,n.body=l.value.body;const e=new W(n);C.sendRequest(e).then(u=>{v.showSuccess("Message Sent Successfully")}).catch(u=>{v.showError("Error sending pubsub message",u)}).finally(()=>{r.value=!1,b()})}},b=()=>{i.value.close()};return(h,e)=>{const u=A,g=m("RadioButton"),R=U,k=m("AccordionTab"),q=m("Accordion"),f=m("Button");return y(),x("form",{onSubmit:e[8]||(e[8]=F(o=>B(!t(_).$invalid),["prevent"]))},[s("div",X,[p.value?N("",!0):(y(),x("div",Y,[s("div",Z,[a(u,{label:"Channel*",modelValue:t(l).channel,"onUpdate:modelValue":e[0]||(e[0]=o=>t(l).channel=o),placeholder:"channel name"},null,8,["modelValue"])]),s("div",ee,[s("div",se,[s("div",oe,[a(g,{inputId:"events",name:"pubsub",value:"events",modelValue:t(d),"onUpdate:modelValue":e[1]||(e[1]=o=>M(d)?d.value=o:null)},null,8,["modelValue"]),te]),s("div",le,[a(g,{inputId:"events_store",name:"pubsub",value:"events_store",modelValue:t(d),"onUpdate:modelValue":e[2]||(e[2]=o=>M(d)?d.value=o:null)},null,8,["modelValue"]),ae])])])])),s("div",ne,[s("div",de,[a(R,{label:"Body*",modelValue:t(l).body,"onUpdate:modelValue":e[3]||(e[3]=o=>t(l).body=o),height:"300px"},null,8,["modelValue"])])]),s("div",ie,[s("div",ue,[a(q,null,{default:I(()=>[a(k,{header:"Message Attributes"},{default:I(()=>[s("div",ce,[s("div",re,[a(u,{label:"Message Id",modelValue:t(n).messageId,"onUpdate:modelValue":e[4]||(e[4]=o=>t(n).messageId=o),placeholder:"Message Id"},null,8,["modelValue"])]),s("div",me,[a(u,{label:"Metadata",modelValue:t(n).metadata,"onUpdate:modelValue":e[5]||(e[5]=o=>t(n).metadata=o),placeholder:"metadata string..."},null,8,["modelValue"])]),s("div",pe,[a(u,{label:"Tags",modelValue:t(n).tags,"onUpdate:modelValue":e[6]||(e[6]=o=>t(n).tags=o),placeholder:"key=value,key2=value2"},null,8,["modelValue"])])])]),_:1})]),_:1})])]),s("div",ve,[s("div",_e,[a(f,{label:"Cancel",class:"button-grey",icon:"pi pi-times",onClick:e[7]||(e[7]=o=>b()),style:{width:"10rem"}})]),s("div",be,[a(f,{label:"Send",type:"submit",disabled:t(_).$invalid,class:"button-grey",loading:r.value,icon:"pi pi-send",style:{width:"10rem"}},null,8,["disabled","loading"])])])])],32)}}}),Ie=K(he,[["__scopeId","data-v-40d93825"]]);export{Ie as default};
