import B from"./InputText.0abbd94c.js";import U from"./CodeEditor.f8fdf1e5.js";import q from"./InputNumber.0c5624bb.js";import{u as E}from"./request.29e64ff5.js";import{u as k}from"./useToastMessage.bad030a2.js";import{a as D,y as N,v as x,z as $,x as j,o as V,h as y,i as l,j as n,u as t,s as F,w as S,B as L,D as z,E as H,r as _,H as W,l as G}from"./entry.86b9e19f.js";import{u as J,r as M}from"./index.esm.81d2c330.js";import{S as K}from"./queues_request.8f3c70a9.js";class O{setMessageId(s){return this.messageId=s,this}setChannel(s){return this.channel=s,this}setClientId(s){return this.clientId=s,this}setMetadata(s){return this.metadata=s,this}setBody(s){return this.body=s,this}setTags(s){return this.tags=s,this}setMaxReceiveCount(s){return this.maxReceiveCount=s,this}setMaxReceiveQueue(s){return this.maxReceiveQueue=s,this}setExpirationAt(s){return this.expirationAt=s,this}setDelayedTo(s){return this.delayedTo=s,this}constructor(s){this.messageId="",this.channel="",this.clientId="",this.metadata="",this.body="",this.tags="",this.maxReceiveCount=0,this.maxReceiveQueue="",this.expirationAt=0,this.delayedTo=0}}const P={class:"grid-nogutter grid col-12 mt-2"},X={key:0,class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},Y={class:"col-12 md:col-3 pt-0"},Z={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},ee={class:"col-12 md:col-12 pt-0"},se={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1 mt-2"},te={class:"col-12 md:col-12 pt-0"},oe={class:"flex align-items-end grid p-fluid border-top-1 border-light-grey col-12 pb-0 mb-1"},le={class:"col-12 md:col-3 pt-0"},ae={class:"col-12 md:col-3 pt-0"},ne={class:"col-12 md:col-3 pt-0"},de={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},ie={class:"col-12 md:col-3 pt-0"},ue={class:"col-12 md:col-3 pt-0"},ce={class:"col-12 md:col-3 pt-0"},re={class:"col-12 md:col-3 pt-0"},me={class:"flex align-items-end grid justify-content-end p-fluid col-12 pb-0 mb-1 mt-2"},pe={class:"mr-2"},he={class:"ml-2"},ve=D({__name:"SendMessage",setup(C){const s=z("system-connection"),R=m=>{m==="disconnected"&&v()};s.on(R);const d=N("send-queues-required-Data",{channel:"",body:""}),i=H("dialogRef"),p=x(!1);let a=$(new O(i.value.data.channel));j(()=>{p.value=i.value.data.isChannelSource,i.value.options.props.header="Send a Queue Message",p.value&&(d.value.channel=i.value.data.channel,i.value.options.props.header="Send a Queue message to: "+d.value.channel)});let c=null;const I=E(),h=k(),r=x(!1),b=J({body:{required:M},channel:{required:M}},d.value),Q=m=>{m&&(r.value=!0,W(()=>{r.value=!0}),a.channel=d.value.channel,a.body=d.value.body,c=new K(a),I.sendRequest(c).then(e=>{h.showSuccess("Message Sent Successfully")}).catch(e=>{e.isCanceled?h.showWarn("Request Canceled"):h.showError("Error sending Queue message",e.message)}).finally(()=>{r.value=!1,v()}))},v=()=>{c!==null&&c.abort(),i.value.close()};return(m,e)=>{const u=B,T=U,g=q,A=_("AccordionTab"),w=_("Accordion"),f=_("Button");return V(),y("form",{onSubmit:e[10]||(e[10]=L(o=>Q(!t(b).$invalid),["prevent"]))},[l("div",P,[p.value?F("",!0):(V(),y("div",X,[l("div",Y,[n(u,{label:"Channel*",modelValue:t(d).channel,"onUpdate:modelValue":e[0]||(e[0]=o=>t(d).channel=o),placeholder:"channel name"},null,8,["modelValue"])])])),l("div",Z,[l("div",ee,[n(T,{label:"Body*",modelValue:t(d).body,"onUpdate:modelValue":e[1]||(e[1]=o=>t(d).body=o),height:"300px"},null,8,["modelValue"])])]),l("div",se,[l("div",te,[n(w,null,{default:S(()=>[n(A,{header:"Message Attributes"},{default:S(()=>[l("div",oe,[l("div",le,[n(u,{label:"Message Id",modelValue:t(a).messageId,"onUpdate:modelValue":e[2]||(e[2]=o=>t(a).messageId=o),placeholder:"Message Id"},null,8,["modelValue"])]),l("div",ae,[n(u,{label:"Metadata",modelValue:t(a).metadata,"onUpdate:modelValue":e[3]||(e[3]=o=>t(a).metadata=o),placeholder:"metadata string..."},null,8,["modelValue"])]),l("div",ne,[n(u,{label:"Tags",modelValue:t(a).tags,"onUpdate:modelValue":e[4]||(e[4]=o=>t(a).tags=o),placeholder:"key=value,key2=value2"},null,8,["modelValue"])])]),l("div",de,[l("div",ie,[n(g,{label:"Message Expiration Seconds ",modelValue:t(a).expirationAt,"onUpdate:modelValue":e[5]||(e[5]=o=>t(a).expirationAt=o),min:0,max:82320},null,8,["modelValue"])]),l("div",ue,[n(g,{label:"Message Delay Seconds",modelValue:t(a).delayedTo,"onUpdate:modelValue":e[6]||(e[6]=o=>t(a).delayedTo=o),min:0,max:82320},null,8,["modelValue"])]),l("div",ce,[n(g,{label:"Max Retries",modelValue:t(a).maxReceiveCount,"onUpdate:modelValue":e[7]||(e[7]=o=>t(a).maxReceiveCount=o),min:0,max:1024},null,8,["modelValue"])]),l("div",re,[n(u,{label:"Dead-Letter Queue",modelValue:t(a).maxReceiveQueue,"onUpdate:modelValue":e[8]||(e[8]=o=>t(a).maxReceiveQueue=o),placeholder:"No Dead-Letter Queue"},null,8,["modelValue"])])])]),_:1})]),_:1})])]),l("div",me,[l("div",pe,[n(f,{label:"Cancel",class:"button-grey",icon:"pi pi-times",onClick:e[9]||(e[9]=o=>v()),style:{width:"10rem"}})]),l("div",he,[n(f,{label:"Send",type:"submit",disabled:t(b).$invalid,class:"button-grey",loading:r.value,icon:"pi pi-send",style:{width:"10rem"}},null,8,["disabled","loading"])])])])],32)}}}),Ce=G(ve,[["__scopeId","data-v-907377dd"]]);export{Ce as default};
