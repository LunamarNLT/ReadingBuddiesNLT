import{J as l,U as i}from"./entry.86b9e19f.js";function c(){const{ApiOrigin:n}=l();return{sendRequest:s=>new Promise((r,t)=>{i.post("/api/request",s.payload,{baseURL:n.value,signal:s.signal}).then(e=>{e.data.error&&t({isCanceled:!1,message:e.data.error_string}),r(e.data)}).catch(e=>{e.message==="canceled"?t({isCanceled:!0,message:"Request canceled by user"}):t({isCanceled:!1,message:e.message})})})}}class u{cancelFn(){return{}}completed(){this.cancelFn()}abort(){this.abortController.abort(),this.cancelFn()}setCancelFn(a){this.cancelFn=a}constructor(a,s){this.payload={type:a,data:s},this.abortController=new AbortController,this.signal=this.abortController.signal}}export{u as G,c as u};
