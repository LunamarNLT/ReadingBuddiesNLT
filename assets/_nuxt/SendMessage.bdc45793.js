import T from"./InputText.95e7607b.js";import $ from"./CodeEditor.f3e0f57e.js";import{G as j,u as D}from"./request.95ba5b66.js";import{u as N}from"./useToastMessage.dd22ad89.js";import{a as F,y,v as x,z as G,x as z,o as E,h as M,i as s,j as l,u as o,A as C,s as H,w as I,B as L,D as W,E as J,r as v,p as K,k as O,H as Q,l as X}from"./entry.ac81eb43.js";import{u as Y,r as w}from"./index.esm.108bfc55.js";class Z{constructor(){this.messageId="",this.channel="",this.clientId="",this.metadata="",this.body="",this.tags="",this.isEvents=!1}}class ee extends j{constructor(b){super("send_pubsub_message",b)}}const B=u=>(K("data-v-ba646ca2"),u=u(),O(),u),se={class:"grid-nogutter grid col-12 mt-2"},te={key:0,class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},oe={class:"col-12 md:col-3 pt-0"},le={class:"col-12 md:col-3 pt-0"},ae={class:"flex"},ne={class:"mr-2"},de=B(()=>s("label",{class:"ml-1",for:"events"},"Events",-1)),ie={class:"ml-2"},ue=B(()=>s("label",{class:"ml-1",for:"events_store"},"Events Store",-1)),ce={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1"},re={class:"col-12 md:col-12 pt-0"},me={class:"flex align-items-end grid p-fluid col-12 pb-0 mb-1 mt-2"},pe={class:"col-12 md:col-12 pt-0"},ve={class:"flex align-items-end grid p-fluid border-top-1 border-light-grey col-12 pb-0 mb-1"},be={class:"col-12 md:col-4 pt-0"},_e={class:"col-12 md:col-4 pt-0"},he={class:"col-12 md:col-4 pt-0"},ge={class:"flex align-items-end grid justify-content-end p-fluid col-12 pb-0 mb-1 mt-2"},fe={class:"mr-2"},Se={class:"ml-2"},Ve=F({__name:"SendMessage",setup(u){const b=W("system-connection"),R=m=>{m==="disconnected"&&g()};b.on(R);const a=y("send-pub-sub-required-Data",{channel:"",body:""}),d=y("send-pub-sub-radio-button","events"),_=x(!1),i=J("dialogRef");let n=G(new Z);z(()=>{_.value=i.value.data.isChannelSource,i.value.options.props.header="Send a PubSub Message",_.value&&(a.value.channel=i.value.data.channel,d.value=i.value.data.isEvents?"events":"events_store",i.value.data.isEvents?i.value.options.props.header="Publish Events message to: "+a.value.channel:i.value.options.props.header="Publish Events-Store message to: "+a.value.channel)});let c=null;const k=D(),h=N(),r=x(!1),f=Y({body:{required:w},channel:{required:w}},a.value),q=m=>{m&&(r.value=!0,Q(()=>{r.value=!0}),n.isEvents=d.value==="events",n.channel=a.value.channel,n.body=a.value.body,c=new ee(n),k.sendRequest(c).then(e=>{h.showSuccess("Message published successfully")}).catch(e=>{e.isCanceled?h.showWarn("Request Canceled"):h.showError("Error publishing PubSub message",e.message)}).finally(()=>{r.value=!1,g()}))},g=()=>{c!==null&&c.abort(),i.value.close()};return(m,e)=>{const p=T,S=v("RadioButton"),A=$,P=v("AccordionTab"),U=v("Accordion"),V=v("Button");return E(),M("form",{onSubmit:e[8]||(e[8]=L(t=>q(!o(f).$invalid),["prevent"]))},[s("div",se,[_.value?H("",!0):(E(),M("div",te,[s("div",oe,[l(p,{label:"Channel*",modelValue:o(a).channel,"onUpdate:modelValue":e[0]||(e[0]=t=>o(a).channel=t),placeholder:"Channel name"},null,8,["modelValue"])]),s("div",le,[s("div",ae,[s("div",ne,[l(S,{inputId:"events",name:"pubsub",value:"events",modelValue:o(d),"onUpdate:modelValue":e[1]||(e[1]=t=>C(d)?d.value=t:null)},null,8,["modelValue"]),de]),s("div",ie,[l(S,{inputId:"events_store",name:"pubsub",value:"events_store",modelValue:o(d),"onUpdate:modelValue":e[2]||(e[2]=t=>C(d)?d.value=t:null)},null,8,["modelValue"]),ue])])])])),s("div",ce,[s("div",re,[l(A,{label:"Body*",modelValue:o(a).body,"onUpdate:modelValue":e[3]||(e[3]=t=>o(a).body=t),height:"300px"},null,8,["modelValue"])])]),s("div",me,[s("div",pe,[l(U,null,{default:I(()=>[l(P,{header:"Message Attributes"},{default:I(()=>[s("div",ve,[s("div",be,[l(p,{label:"Message Id",modelValue:o(n).messageId,"onUpdate:modelValue":e[4]||(e[4]=t=>o(n).messageId=t),placeholder:"Message Id"},null,8,["modelValue"])]),s("div",_e,[l(p,{label:"Metadata",modelValue:o(n).metadata,"onUpdate:modelValue":e[5]||(e[5]=t=>o(n).metadata=t),placeholder:"metadata string..."},null,8,["modelValue"])]),s("div",he,[l(p,{label:"Tags",modelValue:o(n).tags,"onUpdate:modelValue":e[6]||(e[6]=t=>o(n).tags=t),placeholder:"key=value,key2=value2"},null,8,["modelValue"])])])]),_:1})]),_:1})])]),s("div",ge,[s("div",fe,[l(V,{label:"Cancel",class:"button-grey",icon:"pi pi-times",onClick:e[7]||(e[7]=t=>g()),style:{width:"10rem"}})]),s("div",Se,[l(V,{label:"Send",type:"submit",disabled:o(f).$invalid,class:"button-grey",loading:r.value,icon:"pi pi-send",style:{width:"10rem"}},null,8,["disabled","loading"])])])])],32)}}}),Be=X(Ve,[["__scopeId","data-v-ba646ca2"]]);export{Be as default};
